<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ApprovalHistory">
    <!-- 문서에 관한 결재기록 조회 -->
    <select id="getListByApprovalId" resultType="com.kedu.ggirick_client_backend.dto.approval.ApprovalHistoryDTO">
        SELECT * FROM approval_history WHERE approval_id=#{approvalId} ORDER BY recorded_at DESC
    </select>

    <!-- 결재 변경이력 기록 -->
    <insert id="insert">
        INSERT INTO approval_history(id, approval_id, assigner, content, type_id, recorded_at)
        VALUES(approval_history_seq.nextval, #{approvalId}, #{assigner}, #{content}, #{typeId}, sysdate)
    </insert>
</mapper>